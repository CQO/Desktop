{"version":3,"file":"app.js","sources":["app/branding/branding.js","app/scripts/servers.js","app/scripts/webview.js","app/scripts/menus.js","app/scripts/sidebar.js","app/scripts/tray.js","app/scripts/start.js","app/app.js"],"sourcesContent":["// Add your custom JS code here\n","/* globals $ */\n\nimport { EventEmitter } from 'events';\nimport { remote } from 'electron';\nconst remoteServers = remote.require('./servers');\n\nclass Servers extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.load();\n\t}\n\n\tget hosts() {\n\t\treturn this._hosts;\n\t}\n\n\tset hosts(hosts) {\n\t\tthis._hosts = hosts;\n\t\tthis.save();\n\t\treturn true;\n\t}\n\n\tget hostsKey() {\n\t\treturn 'rocket.chat.hosts';\n\t}\n\n\tget activeKey() {\n\t\treturn 'rocket.chat.currentHost';\n\t}\n\n\tload() {\n\t\tvar hosts = localStorage.getItem(this.hostsKey);\n\n\t\ttry {\n\t\t\thosts = JSON.parse(hosts);\n\t\t} catch (e) {\n\t\t\tif (typeof hosts === 'string' && hosts.match(/^https?:\\/\\//)) {\n\t\t\t\thosts = {};\n\t\t\t\thosts[hosts] = {\n\t\t\t\t\ttitle: hosts,\n\t\t\t\t\turl: hosts\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlocalStorage.setItem(this.hostsKey, JSON.stringify(hosts));\n\t\t}\n\n\t\tif (hosts === null) {\n\t\t\thosts = {};\n\t\t}\n\n\t\tif (Array.isArray(hosts)) {\n\t\t\tvar oldHosts = hosts;\n\t\t\thosts = {};\n\t\t\toldHosts.forEach(function(item) {\n\t\t\t\titem = item.replace(/\\/$/, '');\n\t\t\t\thosts[item] = {\n\t\t\t\t\ttitle: item,\n\t\t\t\t\turl: item\n\t\t\t\t};\n\t\t\t});\n\t\t\tlocalStorage.setItem(this.hostsKey, JSON.stringify(hosts));\n\t\t}\n\n\t\tthis._hosts = hosts;\n\t\tremoteServers.loadServers(this._hosts);\n\t\tthis.emit('loaded');\n\t}\n\n\tsave() {\n\t\tlocalStorage.setItem(this.hostsKey, JSON.stringify(this._hosts));\n\t\tthis.emit('saved');\n\t}\n\n\tget(hostUrl) {\n\t\treturn this.hosts[hostUrl];\n\t}\n\n\tforEach(cb) {\n\t\tfor (var host in this.hosts) {\n\t\t\tif (this.hosts.hasOwnProperty(host)) {\n\t\t\t\tcb(this.hosts[host]);\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidateHost(hostUrl, timeout) {\n\t\tconsole.log('Validating hostUrl', hostUrl);\n\t\ttimeout = timeout || 5000;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tvar resolved = false;\n\t\t\t$.getJSON(`${hostUrl}/api/info`).then(function() {\n\t\t\t\tif (resolved) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresolved = true;\n\t\t\t\tconsole.log('HostUrl valid', hostUrl);\n\t\t\t\tresolve();\n\t\t\t}, function(request) {\n\t\t\t\tif (request.status === 401) {\n\t\t\t\t\tlet authHeader = request.getResponseHeader('www-authenticate');\n\t\t\t\t\tif (authHeader && authHeader.toLowerCase().indexOf('basic ') === 0) {\n\t\t\t\t\t\tresolved = true;\n\t\t\t\t\t\tconsole.log('HostUrl needs basic auth', hostUrl);\n\t\t\t\t\t\treject('basic-auth');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (resolved) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tresolved = true;\n\t\t\t\tconsole.log('HostUrl invalid', hostUrl);\n\t\t\t\treject('invalid');\n\t\t\t});\n\t\t\tif (timeout) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif (resolved) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolved = true;\n\t\t\t\t\tconsole.log('Validating hostUrl TIMEOUT', hostUrl);\n\t\t\t\t\treject('timeout');\n\t\t\t\t}, timeout);\n\t\t\t}\n\t\t});\n\t}\n\n\thostExists(hostUrl) {\n\t\tvar hosts = this.hosts;\n\n\t\treturn !!hosts[hostUrl];\n\t}\n\n\taddHost(hostUrl) {\n\t\tvar hosts = this.hosts;\n\n\t\tlet match = hostUrl.match(/^(https?:\\/\\/)([^:]+):([^@]+)@(.+)$/);\n\t\tlet username;\n\t\tlet password;\n\t\tlet authUrl;\n\t\tif (match) {\n\t\t\tauthUrl = hostUrl;\n\t\t\thostUrl = match[1] + match[4];\n\t\t\tusername = match[2];\n\t\t\tpassword = match[3];\n\t\t}\n\n\t\tif (this.hostExists(hostUrl) === true) {\n\t\t\treturn false;\n\t\t}\n\n\t\thosts[hostUrl] = {\n\t\t\ttitle: hostUrl,\n\t\t\turl: hostUrl,\n\t\t\tauthUrl: authUrl,\n\t\t\tusername: username,\n\t\t\tpassword: password\n\t\t};\n\t\tthis.hosts = hosts;\n\n\t\tremoteServers.loadServers(this.hosts);\n\n\t\tthis.emit('host-added', hostUrl);\n\n\t\treturn hostUrl;\n\t}\n\n\tremoveHost(hostUrl) {\n\t\tvar hosts = this.hosts;\n\t\tif (hosts[hostUrl]) {\n\t\t\tdelete hosts[hostUrl];\n\t\t\tthis.hosts = hosts;\n\n\t\t\tremoteServers.loadServers(this.hosts);\n\n\t\t\tif (this.active === hostUrl) {\n\t\t\t\tthis.clearActive();\n\t\t\t}\n\t\t\tthis.emit('host-removed', hostUrl);\n\t\t}\n\t}\n\n\tget active() {\n\t\treturn localStorage.getItem(this.activeKey);\n\t}\n\n\tsetActive(hostUrl) {\n\t\tif (this.hostExists(hostUrl)) {\n\t\t\tlocalStorage.setItem(this.activeKey, hostUrl);\n\t\t\tthis.emit('active-setted', hostUrl);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\trestoreActive() {\n\t\tthis.setActive(this.active);\n\t}\n\n\tclearActive() {\n\t\tlocalStorage.removeItem(this.activeKey);\n\t\tthis.emit('active-cleared');\n\t\treturn true;\n\t}\n\n\tsetHostTitle(hostUrl, title) {\n\t\tif (title === 'Rocket.Chat' && /https?:\\/\\/demo\\.rocket\\.chat/.test(hostUrl) === false) {\n\t\t\ttitle += ' - ' + hostUrl;\n\t\t}\n\t\tvar hosts = this.hosts;\n\t\thosts[hostUrl].title = title;\n\t\tthis.hosts = hosts;\n\t\tthis.emit('title-setted', hostUrl, title);\n\t}\n}\n\nexport var servers = new Servers();\n","import { EventEmitter } from 'events';\nimport { servers } from './servers';\nimport { sidebar } from './sidebar';\n\nclass WebView extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.webviewParentElement = document.body;\n\n\t\tservers.forEach((host) => {\n\t\t\tthis.add(host);\n\t\t});\n\n\t\tservers.on('host-added', (hostUrl) => {\n\t\t\tthis.add(servers.get(hostUrl));\n\t\t});\n\n\t\tservers.on('host-removed', (hostUrl) => {\n\t\t\tthis.remove(hostUrl);\n\t\t});\n\n\t\tservers.on('active-setted', (hostUrl) => {\n\t\t\tthis.setActive(hostUrl);\n\t\t});\n\n\t\tservers.on('active-cleared', (hostUrl) => {\n\t\t\tthis.deactiveAll(hostUrl);\n\t\t});\n\t}\n\n\tadd(host) {\n\t\tvar webviewObj = this.getByUrl(host.url);\n\t\tif (webviewObj) {\n\t\t\treturn;\n\t\t}\n\n\t\twebviewObj = document.createElement('webview');\n\t\twebviewObj.setAttribute('server', host.url);\n\t\twebviewObj.setAttribute('preload', './scripts/preload.js');\n\t\twebviewObj.setAttribute('allowpopups', 'on');\n\t\twebviewObj.setAttribute('disablewebsecurity', 'on');\n\n\t\twebviewObj.addEventListener('did-navigate-in-page', (lastPath) => {\n\t\t\tthis.saveLastPath(host.url, lastPath.url);\n\t\t});\n\n\t\twebviewObj.addEventListener('console-message', function(e) {\n\t\t\tconsole.log('webview:', e.message);\n\t\t});\n\n\t\twebviewObj.addEventListener('ipc-message', (event) => {\n\t\t\tthis.emit('ipc-message-'+event.channel, host.url, event.args);\n\n\t\t\tswitch (event.channel) {\n\t\t\t\tcase 'title-changed':\n\t\t\t\t\tservers.setHostTitle(host.url, event.args[0]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'unread-changed':\n\t\t\t\t\tsidebar.setBadge(host.url, event.args[0]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'focus':\n\t\t\t\t\tservers.setActive(host.url);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\twebviewObj.addEventListener('dom-ready', () => {\n\t\t\tthis.emit('dom-ready', host.url);\n\t\t});\n\n\t\tthis.webviewParentElement.appendChild(webviewObj);\n\n\t\twebviewObj.src = host.lastPath || host.url;\n\t}\n\n\tremove(hostUrl) {\n\t\tvar el = this.getByUrl(hostUrl);\n\t\tif (el) {\n\t\t\tel.remove();\n\t\t}\n\t}\n\n\tsaveLastPath(hostUrl, lastPathUrl) {\n\t\tvar hosts = servers.hosts;\n\t\thosts[hostUrl].lastPath = lastPathUrl;\n\t\tservers.hosts = hosts;\n\t}\n\n\tgetByUrl(hostUrl) {\n\t\treturn this.webviewParentElement.querySelector(`webview[server=\"${hostUrl}\"]`);\n\t}\n\n\tgetActive() {\n\t\treturn document.querySelector('webview.active');\n\t}\n\n\tisActive(hostUrl) {\n\t\treturn !!this.webviewParentElement.querySelector(`webview.active[server=\"${hostUrl}\"]`);\n\t}\n\n\tdeactiveAll() {\n\t\tvar item;\n\t\twhile (!(item = this.getActive()) === false) {\n\t\t\titem.classList.remove('active');\n\t\t}\n\t}\n\n\tsetActive(hostUrl) {\n\t\tconsole.log('active setted', hostUrl);\n\t\tif (this.isActive(hostUrl)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.deactiveAll();\n\t\tvar item = this.getByUrl(hostUrl);\n\t\tif (item) {\n\t\t\titem.classList.add('active');\n\t\t}\n\n\t\tthis.focusActive();\n\t}\n\n\tfocusActive() {\n\t\tvar active = this.getActive();\n\t\tif (active) {\n\t\t\tactive.focus();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport var webview = new WebView();\n","'use strict';\n\nimport { remote } from 'electron';\nimport { servers } from './servers';\nimport { sidebar } from './sidebar';\nimport { webview } from './webview';\nimport webFrame from 'web-frame';\nimport '../branding/branding.js';\n\nvar Menu = remote.Menu;\nvar APP_NAME = remote.app.getName();\nvar template;\n\nvar certificate = remote.require('./certificate');\n\ndocument.title = APP_NAME;\n\nif (process.platform === 'darwin') {\n\ttemplate = [\n\t\t{\n\t\t\tlabel: APP_NAME,\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'About ' + APP_NAME,\n\t\t\t\t\trole: 'about'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Hide ' + APP_NAME,\n\t\t\t\t\taccelerator: 'Command+H',\n\t\t\t\t\trole: 'hide'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Hide Others',\n\t\t\t\t\taccelerator: 'Command+Alt+H',\n\t\t\t\t\trole: 'hideothers'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Show All',\n\t\t\t\t\trole: 'unhide'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Quit ' + APP_NAME,\n\t\t\t\t\taccelerator: 'Command+Q',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.app.quit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: 'Edit',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Undo',\n\t\t\t\t\taccelerator: 'Command+Z',\n\t\t\t\t\trole: 'undo'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Redo',\n\t\t\t\t\taccelerator: 'Command+Shift+Z',\n\t\t\t\t\trole: 'redo'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Cut',\n\t\t\t\t\taccelerator: 'Command+X',\n\t\t\t\t\trole: 'cut'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Copy',\n\t\t\t\t\taccelerator: 'Command+C',\n\t\t\t\t\trole: 'copy'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Paste',\n\t\t\t\t\taccelerator: 'Command+V',\n\t\t\t\t\trole: 'paste'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Select All',\n\t\t\t\t\taccelerator: 'Command+A',\n\t\t\t\t\trole: 'selectall'\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: 'View',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Original Zoom',\n\t\t\t\t\taccelerator: 'Command+0',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\twebFrame.setZoomLevel(0);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Zoom In',\n\t\t\t\t\taccelerator: 'Command+=',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\twebFrame.setZoomLevel(webFrame.getZoomLevel()+1);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Zoom Out',\n\t\t\t\t\taccelerator: 'Command+-',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\twebFrame.setZoomLevel(webFrame.getZoomLevel()-1);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Current Server - Reload',\n\t\t\t\t\taccelerator: 'Command+R',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tconst activeWebview = webview.getActive();\n\t\t\t\t\t\tif (activeWebview) {\n\t\t\t\t\t\t\tactiveWebview.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Current Server - Toggle DevTools',\n\t\t\t\t\taccelerator: 'Command+Alt+I',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tconst activeWebview = webview.getActive();\n\t\t\t\t\t\tif (activeWebview) {\n\t\t\t\t\t\t\tactiveWebview.openDevTools();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Application - Reload',\n\t\t\t\t\taccelerator: 'Command+Shift+R',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tvar mainWindow = remote.getCurrentWindow();\n\t\t\t\t\t\tif (mainWindow.tray) {\n\t\t\t\t\t\t\tmainWindow.tray.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmainWindow.reload();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Application - Toggle DevTools',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.getCurrentWindow().toggleDevTools();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Toggle server list',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tsidebar.toggle();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Clear',\n\t\t\t\t\tsubmenu: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Clear Trusted Certificates',\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tcertificate.clear();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: 'Window',\n\t\t\tid: 'window',\n\t\t\trole: 'window',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Minimize',\n\t\t\t\t\taccelerator: 'Command+M',\n\t\t\t\t\trole: 'minimize'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Close',\n\t\t\t\t\taccelerator: 'Command+W',\n\t\t\t\t\trole: 'close'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator',\n\t\t\t\t\tid: 'server-list-separator',\n\t\t\t\t\tvisible: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Add new server',\n\t\t\t\t\taccelerator: 'Command+N',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tvar mainWindow = remote.getCurrentWindow();\n\t\t\t\t\t\tmainWindow.show();\n\t\t\t\t\t\tservers.clearActive();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Bring All to Front',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tvar mainWindow = remote.getCurrentWindow();\n\t\t\t\t\t\tmainWindow.show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: 'Help',\n\t\t\trole: 'help',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: APP_NAME + ' Help',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.shell.openExternal('https://rocket.chat/docs');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Learn More',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.shell.openExternal('https://rocket.chat');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t];\n} else {\n\ttemplate = [\n\t\t{\n\t\t\tlabel: '&' + APP_NAME,\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'About ' + APP_NAME,\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tconst win = new remote.BrowserWindow({ width: 310, height: 200, minWidth: 310, minHeight: 200, maxWidth: 310, maxHeight: 200, show: false, maximizable: false, minimizable: false, title: ' ' });\n\t\t\t\t\t\twin.loadURL('file://' + __dirname + '/about.html');\n\t\t\t\t\t\twin.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Quit',\n\t\t\t\t\taccelerator: 'Ctrl+Q',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.app.quit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: '&Edit',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Undo',\n\t\t\t\t\taccelerator: 'Ctrl+Z',\n\t\t\t\t\trole: 'undo'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Redo',\n\t\t\t\t\taccelerator: 'Ctrl+Shift+Z',\n\t\t\t\t\trole: 'redo'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Cut',\n\t\t\t\t\taccelerator: 'Ctrl+X',\n\t\t\t\t\trole: 'cut'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Copy',\n\t\t\t\t\taccelerator: 'Ctrl+C',\n\t\t\t\t\trole: 'copy'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Paste',\n\t\t\t\t\taccelerator: 'Ctrl+V',\n\t\t\t\t\trole: 'paste'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Select All',\n\t\t\t\t\taccelerator: 'Ctrl+A',\n\t\t\t\t\trole: 'selectall'\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: '&View',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Original Zoom',\n\t\t\t\t\taccelerator: 'Command+0',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\twebFrame.setZoomLevel(0);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Zoom In',\n\t\t\t\t\taccelerator: 'Command+=',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\twebFrame.setZoomLevel(webFrame.getZoomLevel()+1);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Zoom Out',\n\t\t\t\t\taccelerator: 'Command+-',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\twebFrame.setZoomLevel(webFrame.getZoomLevel()-1);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Current Server - Reload',\n\t\t\t\t\taccelerator: 'Ctrl+R',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tconst activeWebview = webview.getActive();\n\t\t\t\t\t\tif (activeWebview) {\n\t\t\t\t\t\t\tactiveWebview.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Current Server - Toggle DevTools',\n\t\t\t\t\taccelerator: 'Ctrl+Shift+I',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tconst activeWebview = webview.getActive();\n\t\t\t\t\t\tif (activeWebview) {\n\t\t\t\t\t\t\tactiveWebview.openDevTools();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Application - Reload',\n\t\t\t\t\taccelerator: 'Ctrl+Shift+R',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tvar mainWindow = remote.getCurrentWindow();\n\t\t\t\t\t\tif (mainWindow.tray) {\n\t\t\t\t\t\t\tmainWindow.tray.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmainWindow.reload();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Application - Toggle DevTools',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.getCurrentWindow().toggleDevTools();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Toggle server list',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tsidebar.toggle();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Clear',\n\t\t\t\t\tsubmenu: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Clear Trusted Certificates',\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tcertificate.clear();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tlabel: '&Window',\n\t\t\tid: 'window',\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator',\n\t\t\t\t\tid: 'server-list-separator',\n\t\t\t\t\tvisible: false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Add new server',\n\t\t\t\t\taccelerator: 'Ctrl+N',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tservers.clearActive();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'separator'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Close',\n\t\t\t\t\taccelerator: 'Ctrl+W',\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\tremote.getCurrentWindow().close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t];\n}\n\nexport var menuTemplate = template;\nexport var menu = Menu.buildFromTemplate(template);\n\nMenu.setApplicationMenu(menu);\n","import { EventEmitter } from 'events';\nimport { remote } from 'electron';\nimport { servers } from './servers';\nimport { webview } from './webview';\nimport { menuTemplate } from './menus';\n\nvar Menu = remote.Menu;\n\nvar windowMenuPosition = menuTemplate.findIndex(function(i) {return i.id === 'window';});\nvar windowMenu = menuTemplate[windowMenuPosition];\nvar serverListSeparatorPosition = windowMenu.submenu.findIndex(function(i) {return i.id === 'server-list-separator';});\nvar serverListSeparator = windowMenu.submenu[serverListSeparatorPosition];\n\nclass SideBar extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.hostCount = 0;\n\n\t\tthis.listElement = document.getElementById('serverList');\n\n\t\tservers.forEach((host) => {\n\t\t\tthis.add(host);\n\t\t});\n\n\t\tservers.on('host-added', (hostUrl) => {\n\t\t\tthis.add(servers.get(hostUrl));\n\t\t});\n\n\t\tservers.on('host-removed', (hostUrl) => {\n\t\t\tthis.remove(hostUrl);\n\t\t});\n\n\t\tservers.on('active-setted', (hostUrl) => {\n\t\t\tthis.setActive(hostUrl);\n\t\t});\n\n\t\tservers.on('active-cleared', (hostUrl) => {\n\t\t\tthis.deactiveAll(hostUrl);\n\t\t});\n\n\t\tservers.on('title-setted', (hostUrl, title) => {\n\t\t\tthis.setLabel(hostUrl, title);\n\t\t});\n\n\t\twebview.on('dom-ready', (hostUrl) => {\n\t\t\tthis.setImage(hostUrl);\n\t\t});\n\n\t\tif (this.isHidden()) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tadd(host) {\n\t\tvar name = host.title.replace(/^https?:\\/\\/(?:www\\.)?([^\\/]+)(.*)/, '$1');\n\t\tname = name.split('.');\n\t\tname = name[0][0] + (name[1] ? name[1][0] : '');\n\t\tname = name.toUpperCase();\n\n\t\tvar initials = document.createElement('span');\n\t\tinitials.innerHTML = name;\n\n\t\tvar tooltip = document.createElement('div');\n\t\ttooltip.classList.add('tooltip');\n\t\ttooltip.innerHTML = host.title;\n\n\t\tvar badge = document.createElement('div');\n\t\tbadge.classList.add('badge');\n\n\t\tvar img = document.createElement('img');\n\t\timg.onload = function() {\n\t\t\timg.style.display = 'initial';\n\t\t\tinitials.style.display = 'none';\n\t\t};\n\t\t// img.src = `${host.url}/assets/favicon.svg?v=${Math.round(Math.random()*10000)}`;\n\n\t\tvar hotkey = document.createElement('div');\n\t\thotkey.classList.add('name');\n\t\tif (process.platform === 'darwin') {\n\t\t\thotkey.innerHTML = '⌘' + (++this.hostCount);\n\t\t} else {\n\t\t\thotkey.innerHTML = '^' + (++this.hostCount);\n\t\t}\n\n\t\tvar item = document.createElement('li');\n\t\titem.appendChild(initials);\n\t\titem.appendChild(tooltip);\n\t\titem.appendChild(badge);\n\t\titem.appendChild(img);\n\t\titem.appendChild(hotkey);\n\n\t\titem.dataset.host = host.url;\n\t\titem.setAttribute('server', host.url);\n\t\titem.classList.add('instance');\n\n\t\titem.onclick = () => {\n\t\t\tthis.emit('click', host.url);\n\t\t\tservers.setActive(host.url);\n\t\t};\n\n\t\tthis.listElement.appendChild(item);\n\n\t\tserverListSeparator.visible = true;\n\n\t\tvar menuItem = {\n\t\t\tlabel: host.title,\n\t\t\taccelerator: 'CmdOrCtrl+' + this.hostCount,\n\t\t\tposition: 'before=server-list-separator',\n\t\t\tid: host.url,\n\t\t\tclick: () => {\n\t\t\t\tvar mainWindow = remote.getCurrentWindow();\n\t\t\t\tmainWindow.show();\n\t\t\t\tthis.emit('click', host.url);\n\t\t\t\tservers.setActive(host.url);\n\t\t\t}\n\t\t};\n\n\t\twindowMenu.submenu.push(menuItem);\n\t\tMenu.setApplicationMenu(Menu.buildFromTemplate(menuTemplate));\n\t}\n\n\tsetImage(hostUrl) {\n\t\tconst img = this.getByUrl(hostUrl).querySelector('img');\n\t\timg.src = `${hostUrl}/assets/favicon.svg?v=${Math.round(Math.random()*10000)}`;\n\t}\n\n\tremove(hostUrl) {\n\t\tvar el = this.getByUrl(hostUrl);\n\t\tif (el) {\n\t\t\tel.remove();\n\n\t\t\tvar index = windowMenu.submenu.findIndex(function(i) {return i.id === hostUrl;});\n\t\t\twindowMenu.submenu.splice(index, 1);\n\t\t\tMenu.setApplicationMenu(Menu.buildFromTemplate(menuTemplate));\n\t\t}\n\t}\n\n\tgetByUrl(hostUrl) {\n\t\treturn this.listElement.querySelector(`.instance[server=\"${hostUrl}\"]`);\n\t}\n\n\tgetActive() {\n\t\treturn this.listElement.querySelector('.instance.active');\n\t}\n\n\tisActive(hostUrl) {\n\t\treturn !!this.listElement.querySelector(`.instance.active[server=\"${hostUrl}\"]`);\n\t}\n\n\tsetActive(hostUrl) {\n\t\tif (this.isActive(hostUrl)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.deactiveAll();\n\t\tvar item = this.getByUrl(hostUrl);\n\t\tif (item) {\n\t\t\titem.classList.add('active');\n\t\t}\n\t}\n\n\tdeactiveAll() {\n\t\tvar item;\n\t\twhile (!(item = this.getActive()) === false) {\n\t\t\titem.classList.remove('active');\n\t\t}\n\t}\n\n\tsetLabel(hostUrl, label) {\n\t\tthis.listElement.querySelector(`.instance[server=\"${hostUrl}\"] .tooltip`).innerHTML = label;\n\t}\n\n\tsetBadge(hostUrl, badge) {\n\t\tvar item = this.getByUrl(hostUrl);\n\t\tvar badgeEl = item.querySelector('.badge');\n\n\t\tif (badge !== null && badge !== undefined && badge !== '') {\n\t\t\titem.classList.add('unread');\n\t\t\tif (isNaN(parseInt(badge))) {\n\t\t\t\tbadgeEl.innerHTML = '';\n\t\t\t} else {\n\t\t\t\tbadgeEl.innerHTML = badge;\n\t\t\t}\n\t\t} else {\n\t\t\tbadge = undefined;\n\t\t\titem.classList.remove('unread');\n\t\t\tbadgeEl.innerHTML = '';\n\t\t}\n\t\tthis.emit('badge-setted', hostUrl, badge);\n\t}\n\n\tgetGlobalBadge() {\n\t\tvar count = 0;\n\t\tvar alert = '';\n\t\tvar instanceEls = this.listElement.querySelectorAll('li.instance');\n\t\tfor (var i = instanceEls.length - 1; i >= 0; i--) {\n\t\t\tvar instanceEl = instanceEls[i];\n\t\t\tvar text = instanceEl.querySelector('.badge').innerHTML;\n\t\t\tif (!isNaN(parseInt(text))) {\n\t\t\t\tcount += parseInt(text);\n\t\t\t}\n\n\t\t\tif (alert === '' && instanceEl.classList.contains('unread') === true) {\n\t\t\t\talert = '•';\n\t\t\t}\n\t\t}\n\n\t\tif (count > 0) {\n\t\t\treturn String(count);\n\t\t} else {\n\t\t\treturn alert;\n\t\t}\n\t}\n\n\thide() {\n\t\tdocument.body.classList.add('hide-server-list');\n\t\tlocalStorage.setItem('sidebar-closed', 'true');\n\t\tthis.emit('hide');\n\t}\n\n\tshow() {\n\t\tdocument.body.classList.remove('hide-server-list');\n\t\tlocalStorage.setItem('sidebar-closed', 'false');\n\t\tthis.emit('show');\n\t}\n\n\ttoggle() {\n\t\tif (this.isHidden()) {\n\t\t\tthis.show();\n\t\t} else {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\tisHidden() {\n\t\treturn localStorage.getItem('sidebar-closed') === 'true';\n\t}\n}\n\nexport var sidebar = new SideBar();\n\n\nvar selectedInstance = null;\nvar instanceMenu = remote.Menu.buildFromTemplate([{\n\tlabel: 'Reload server',\n\tclick: function() {\n\t\twebview.getByUrl(selectedInstance.dataset.host).reload();\n\t}\n}, {\n\tlabel: 'Remove server',\n\tclick: function() {\n\t\tservers.removeHost(selectedInstance.dataset.host);\n\t}\n}, {\n\tlabel: 'Open DevTools',\n\tclick: function() {\n\t\twebview.getByUrl(selectedInstance.dataset.host).openDevTools();\n\t}\n}]);\n\nwindow.addEventListener('contextmenu', function(e) {\n\tif (e.target.classList.contains('instance') || e.target.parentNode.classList.contains('instance')) {\n\t\te.preventDefault();\n\t\tif (e.target.classList.contains('instance')) {\n\t\t\tselectedInstance = e.target;\n\t\t} else {\n\t\t\tselectedInstance = e.target.parentNode;\n\t\t}\n\n\t\tinstanceMenu.popup(remote.getCurrentWindow());\n\t}\n}, false);\n","'use strict';\n\nimport { remote } from 'electron';\nimport path from 'path';\n\nvar Tray = remote.Tray;\nvar Menu = remote.Menu;\n\nlet mainWindow = remote.getCurrentWindow();\n\nvar icons = {\n    'win32': {\n        dir: 'windows'\n    },\n\n    'linux': {\n        dir: 'linux'\n    },\n\n    'darwin': {\n        dir: 'osx',\n        icon: 'icon-trayTemplate.png'\n    }\n};\n\nlet _iconTray = path.join(__dirname, 'images', icons[process.platform].dir, icons[process.platform].icon || 'icon-tray.png');\nlet _iconTrayAlert = path.join(__dirname, 'images', icons[process.platform].dir, icons[process.platform].iconAlert || 'icon-tray-alert.png');\n\nfunction createAppTray() {\n    let _tray = new Tray(_iconTray);\n    var contextMenu = Menu.buildFromTemplate([{\n        label: 'Hide',\n        click: function() {\n            mainWindow.hide();\n        }\n    }, {\n        label: 'Show',\n        click: function() {\n            mainWindow.show();\n        }\n    }, {\n        label: 'Quit',\n        click: function() {\n            remote.app.quit();\n        }\n    }]);\n    _tray.setToolTip(remote.app.getName());\n    _tray.setContextMenu(contextMenu);\n\n    if (process.platform === 'darwin' || process.platform === 'win32') {\n        _tray.on('double-click', function() {\n            mainWindow.show();\n        });\n    } else {\n        let dblClickDelay = 500,\n            dblClickTimeoutFct = null;\n        _tray.on('click', function() {\n            if (!dblClickTimeoutFct) {\n                dblClickTimeoutFct = setTimeout(function() {\n                    // Single click, do nothing for now\n                    dblClickTimeoutFct = null;\n                }, dblClickDelay);\n            } else {\n                clearTimeout(dblClickTimeoutFct);\n                dblClickTimeoutFct = null;\n                mainWindow.show();\n            }\n        });\n    }\n\n    mainWindow = mainWindow;\n    mainWindow.tray = _tray;\n}\n\nfunction showTrayAlert(showAlert, title) {\n    if (mainWindow.tray === null || mainWindow.tray === undefined) {\n        return;\n    }\n\n    mainWindow.flashFrame(showAlert);\n    if (showAlert) {\n        mainWindow.tray.setImage(_iconTrayAlert);\n        if (process.platform === 'darwin') {\n            mainWindow.tray.setTitle(title);\n        }\n    } else {\n        mainWindow.tray.setImage(_iconTray);\n        if (process.platform === 'darwin') {\n            mainWindow.tray.setTitle(title);\n        }\n    }\n}\n\ncreateAppTray();\n\nexport default {\n    showTrayAlert: showTrayAlert\n};\n","/* globals $ */\n\nimport { remote, ipcRenderer } from 'electron';\nimport { servers } from './servers';\nimport { sidebar } from './sidebar';\nimport { webview } from './webview';\nimport tray from './tray';\nimport './menus';\n\nsidebar.on('badge-setted', function() {\n    var badge = sidebar.getGlobalBadge();\n\n    if (process.platform === 'darwin') {\n        remote.app.dock.setBadge(badge);\n    }\n    tray.showTrayAlert(!isNaN(parseInt(badge)) && badge > 0, badge);\n});\n\nexport var start = function() {\n    var defaultInstance = 'https://demo.rocket.chat';\n\n    // connection check\n    function online() {\n        document.body.classList.remove('offline');\n    }\n\n    function offline() {\n        document.body.classList.add('offline');\n    }\n\n    if (!navigator.onLine) {\n        offline();\n    }\n    window.addEventListener('online', online);\n    window.addEventListener('offline', offline);\n    // end connection check\n\n    var form = document.querySelector('form');\n    var hostField = form.querySelector('[name=\"host\"]');\n    var button = form.querySelector('[type=\"submit\"]');\n    var invalidUrl = form.querySelector('#invalidUrl');\n\n    window.addEventListener('load', function() {\n        hostField.focus();\n    });\n\n    function validateHost() {\n        return new Promise(function(resolve, reject) {\n            var execValidation = function() {\n                invalidUrl.style.display = 'none';\n                hostField.classList.remove('wrong');\n\n                var host = hostField.value.trim();\n                host = host.replace(/\\/$/, '');\n                hostField.value = host;\n\n                if (host.length === 0) {\n                    button.value = 'Connect';\n                    button.disabled = false;\n                    resolve();\n                    return;\n                }\n\n                button.value = 'Validating...';\n                button.disabled = true;\n\n                servers.validateHost(host, 2000).then(function() {\n                    button.value = 'Connect';\n                    button.disabled = false;\n                    resolve();\n                }, function(status) {\n                    // If the url begins with HTTP, mark as invalid\n                    if (/^https?:\\/\\/.+/.test(host) || status === 'basic-auth') {\n                        button.value = 'Invalid url';\n                        invalidUrl.style.display = 'block';\n                        switch (status) {\n                            case 'basic-auth':\n                                invalidUrl.innerHTML = 'Auth needed, try <b>username:password@host</b>';\n                                break;\n                            case 'invalid':\n                                invalidUrl.innerHTML = 'No valid server found at the URL';\n                                break;\n                            case 'timeout':\n                                invalidUrl.innerHTML = 'Timeout trying to connect';\n                                break;\n                        }\n                        hostField.classList.add('wrong');\n                        reject();\n                        return;\n                    }\n\n                    // // If the url begins with HTTPS, fallback to HTTP\n                    // if (/^https:\\/\\/.+/.test(host)) {\n                    //     hostField.value = host.replace('https://', 'http://');\n                    //     return execValidation();\n                    // }\n\n                    // If the url isn't localhost, don't have dots and don't have protocol\n                    // try as a .rocket.chat subdomain\n                    if (!/(^https?:\\/\\/)|(\\.)|(^([^:]+:[^@]+@)?localhost(:\\d+)?$)/.test(host)) {\n                        hostField.value = `https://${host}.rocket.chat`;\n                        return execValidation();\n                    }\n\n                    // If the url don't start with protocol try HTTPS\n                    if (!/^https?:\\/\\//.test(host)) {\n                        hostField.value = `https://${host}`;\n                        return execValidation();\n                    }\n                });\n            };\n            execValidation();\n        });\n    }\n\n    hostField.addEventListener('blur', function() {\n        validateHost().then(function() {}, function() {});\n    });\n\n    ipcRenderer.on('certificate-reload', function(event, url) {\n        hostField.value = url.replace(/\\/api\\/info$/, '');\n        validateHost().then(function() {}, function() {});\n    });\n\n    var submit = function() {\n        validateHost().then(function() {\n            var input = form.querySelector('[name=\"host\"]');\n            var url = input.value;\n\n            if (url.length === 0) {\n                url = defaultInstance;\n            }\n\n            url = servers.addHost(url);\n            if (url !== false) {\n                sidebar.show();\n                servers.setActive(url);\n            }\n\n            input.value = '';\n        }, function() {});\n    };\n\n    hostField.addEventListener('keydown', function(ev) {\n        if (ev.which === 13) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            submit();\n            return false;\n        }\n    });\n\n    form.addEventListener('submit', function(ev) {\n        ev.preventDefault();\n        ev.stopPropagation();\n        submit();\n        return false;\n    });\n\n    $('.add-server').on('click', function() {\n        servers.clearActive();\n    });\n\n    servers.restoreActive();\n};\n\nwindow.addEventListener('focus', function() {\n    webview.focusActive();\n});\n","import './branding/branding.js';\nimport { start } from './scripts/start';\nimport { remote } from 'electron';\n\nvar app = remote.app;\n\nBugsnag.metaData = {\n\t// platformId: app.process.platform,\n\t// platformArch: app.process.arch,\n\t// electronVersion: app.process.versions.electron,\n\tversion: app.getVersion()\n\t// platformVersion: cordova.platformVersion\n\t// build: appInfo.build\n};\n\nBugsnag.appVersion = app.getVersion();\n\nwindow.$ = window.jQuery = require('./vendor/jquery-1.12.0');\nstart();\n"],"names":["remote","EventEmitter","Menu","ipcRenderer"],"mappings":"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"}